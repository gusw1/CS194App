<!doctype html>
<html>
	<head>
		<title>Bar Chart</title>
		<script src="./FindHouseTotals.js">
			window.houseTotal = Math.round(getTotalSpending());
			console.log("Total is:", houseTotal);
		</script>
		<script src="./Chart.js-master/Chart.js"></script>
	</head>
	<body>
		<div style="width: 50%">
			<canvas id="canvas" height="450" width="600"></canvas>
		</div>

	<script>
	var query = new Parse.Query("Transactions");
	query.find({
	success: function(results) {
	var sum = 0;
	for (var i = 0; i < results.length; ++i) {
	sum += results[i].get("SocialExpense");
	sum += results[i].get("KitchenExpense");
	}
	response.success(sum);
	},
	error: function() {
	response.error("House not found");
	}
	});
	var randomScalingFactor = function() {return Math.round(Math.random() * 100)};
	console.log("Hello its me", window.houseTotal);
	var barChartData = {
		labels : ["January","February","March","April","May","June","July"],
		datasets : [
			{
				fillColor : "rgba(220,220,220,0.5)",
				strokeColor : "rgba(220,220,220,0.8)",
				highlightFill: "rgba(220,220,220,0.75)",
				highlightStroke: "rgba(220,220,220,1)",
				//data : [randomScalingFactor,randomScalingFactor,randomScalingFactor,randomScalingFactor,randomScalingFactor,randomScalingFactor,randomScalingFactor]
				data : [window.houseTotal,randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]
			},
			{
				fillColor : "rgba(151,187,205,0.5)",
				strokeColor : "rgba(151,187,205,0.8)",
				highlightFill : "rgba(151,187,205,0.75)",
				highlightStroke : "rgba(151,187,205,1)",
				//data : [randomScalingFactor,randomScalingFactor,randomScalingFactor,randomScalingFactor,randomScalingFactor,randomScalingFactor,randomScalingFactor]
				data : [window.houseTotal,randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]
			}
		]

	}
	window.onload = function(){
		var ctx = document.getElementById("canvas").getContext("2d");
		window.myBar = new Chart(ctx).Bar(barChartData, {
			responsive : true
		});
	}


	</script>
	</body>
</html>
